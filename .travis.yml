language: python

python:
  - "3.5"
  - "3.6"
  - "3.7"
dist: xenial
sudo: true

matrix:
  fast_finish: true

install:
  - pip install coverage
  - pip install coveralls
  - pip install aiohttp
  - pip install -e .

script:
  - python scripts/test_import.py
  - coverage run --source=pyfronius setup.py test

after_success:
  - coverage report
  - coveralls

deploy:
  provider: pypi
  on:
    branch: master
    python: "3.7"
  distributions: "sdist bdist_wheel"
  skip_existing: true
  username: "nielstron"
  password:
    secure: "WcxG+grc+JzbMYKAYstrKPgC4GQMmzgaHmOQpKe+hz0V93623CzJHMfDPOsUkTCWQFcSfUPzR7URo3R5jtMeW7JNgnGFlnvPRTNJ79OHoo48Cfd7hpAk7E0U84Lhr8HPJ2WLUWsaM9buuSkR3Re8zBT1SiUgfvxtY0uqsWJDPpdwj4EpBUJ1bWva98ZYB/0jGy3cYemH6gPt9lbCnQOOvRzIj21jaf6KxxNDEivFT0oyC2IpUO3cVCAXY+6oFBo0FCflNFYL/3AQfslT7AXejGVIw74RbJC3T5ofb4DoAuzNiLA4FMUtmuGfIZ5adteeKfqR4zToIVloZNB25/QaOyhsicAfhWvUT8PyFS1/rE/KRgsHffSS6toVKaS1OJdiYGALyMPg2luoEtacIIsH+abetLRVC6l3Ks0UIWBHu4sHLxUbHKfiseWKT6gZg4sEwbnnd5jgomMaJN+jytKZ5pAvSGm59+1FvgHXanf+nxZd5TfivWAfLv561mKNeAVGqFsuvMaUlTXc25S7Fl1aXhc+/Yd26YVHXj2+Ilr2KRnHvzXGtEPHERdvN94hqTvyYjcnTbxrbcxBgePnaBY6zpD4lMxWixjIykx9JDqms/bIlCov3C0L+REKbDk260wwUL8cXN9F3+hNDIAv7WjL8QMzGXDEPyu4exWhkypzdC0="
